---
title: "Статистика от Google Analytics для amCharts через XSLT"
description: "Простой скрипт на баше и парочка XSL-шаблонов."
categories: [сервер, analytics, charts, google, inshaker, xslt]
layout: post
time: 16:21:45
lang: ru
---
<p>Сделал новую <a href="http://www.inshaker.ru/about.html">статистику посещаемости</a> для <a href="http://www.inshaker.ru/">Иншейкера</a>. Рисуется она, как и <a href="http://vaskas.ru/2008/08/08/displaying-google-analytics-charts-on-the-website/">прежняя</a>, с помощью <a href="http://www.amcharts.com/">amCharts</a>. Но теперь все действия по выкачиванию и преобразовыванию данных выполняются простым bash-скриптом и стандартной утилитой <a href="http://xmlsoft.org/XSLT/xsltproc2.html">xsltproc</a>. Думаю, <code>bash</code> и <code>xsltproc</code> есть у всех.</p>

<p>Дело делают всего два скрипта: <code>login.sh</code> и <code>update.sh</code>. Первый логинится в гугл, используя мыло и пароль из переменных окружения (нечего им в коде делать). Гугл в ответ отдает авторизационный токен, который, согласно документации, можно использовать около двух недель. Второй скрипт выкачивает статистику в формате <a href="http://en.wikipedia.org/wiki/Atom_(standard)">Atom</a>, расширенном гуглом. На этом программирование на баше заканчивается, и начинается XSLT.</p>

<p>Скрипты со стилями положил на гитхаб в <a href="http://github.com/kung-fu-tzu/analytics-xslt">analytics-xslt</a>.</p>

<p><strong>UPD</strong>: разошелся и сделал нам <a href="http://www.inshaker.ru/geeks/stats.html">статистику по браузерам</a>.</p>