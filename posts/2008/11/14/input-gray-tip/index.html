<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Серенькие подсказки в текстовых инпутах — Блог Конфуция</title>
	<!--# include virtual="/inc/common-head.html" -->
</head>
<body>
<!--# include virtual="/inc/common-top.html" -->
<div class="main-wrapper">

<a href="/" class="blog-name">Блог Конфуция</a>

<div class="post">
	<section>
		<h class="title">Серенькие подсказки в текстовых инпутах</h>
		<span class="date">14.11.2008</span>
		<section class="content">
		<p>Кладем инпут в лейбл. Кидаем <code>&lt;small&gt;</code> с подсказкой в лейбл. Лейблу делаем <code>position: relative</code>. Располагаем смол над инпутом. Делаем цвет смола прозрачным или просто сереньким.</p>

<p>Получается, когда юзер кликает мышкой по подсказке, фокус переходит в инпут. Остается научить страничку прятать подсказку, когда в инпуте появляется текст.</p>

<p>Чтобы все было красиво, надо чтобы подсказка пряталась сразу после появления текста в инпуте. Сделать это не так просто, как кажется. Если подписаться на <code>keydown</code> , то мы не сможем узнать, какой текст сейчас в инпуте. Если подписаться на <code>keypress</code> или <code>keyup</code>, то мы сможем спрятать тип только после небольшой, но заметной задержки.</p>

<p>Махинации с отлавливанием делита и бекспейса не проходят, так как юзер может выделить текст мышкой и удалить его разом. Дублировать функциональность инпута для того, чтобы узнать его значение — это не наш путь.</p>

<p>Работает очень простой финт. Подписываемся на <code>keypress</code>, откладываем событие с помощью <code>setTimeout()</code>, и производим все проверки в отложенной функции, когда инпут уже определиться со своим состоянием.</p>
		</section>
	</section>
	
	<dl class="tags">
		<dt class="head">Теги:</dt>
		<dd class="body">
			<ul class="list"><li class="tag">клиент</li><li class="tag">input tip</li><li class="tag">keypress</li></ul>
		</dd>
	</dl>
	
	<div class="comments">Очень жду ваших комментариев <a href="mailto:Комментарии блога Конфуция <comments@kung-fu-tzu.ru>?subject=Re: Серенькие подсказки в текстовых инпутах">на почту</a>.</div>
</div>

</div>
<!--# include virtual="/inc/common-bottom.html" -->
</body>
</html>