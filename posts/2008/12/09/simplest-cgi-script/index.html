<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Простейший cgi-скрипт — Блог Конфуция</title>
	<!--# include virtual="/inc/common-head.html" -->
</head>
<body>
<!--# include virtual="/inc/common-top.html" -->
<div class="main-wrapper">

<a href="/" class="blog-name">Блог Конфуция</a>

<div class="post">
	<section>
		<h class="title">Простейший cgi-скрипт</h>
		<span class="date">09.12.2008</span>
		<section class="content">
		<p>Ненадолго отвлекусь от устройства нжинкса. Решил, шутки ради, проверить, как быстро основные скриптовые языки умеют запускаться внутри cgi-скриптов. CGI — это уже старо, совсем не модно, но зато стабильно.</p>

<p>Сравнил статический файл, скомпиленный C, перл, руби, питон и яваскрипт (SpiderMonkey). Ясное дело, что от языка тут зависит немного. Время в основном уходит на создание пайпа, выставление переменных окружения и форк. Затем каждый интерпретатор выставляет свои глобальные переменные, классы. И только потом уже собственно парсит и выполняет скрипт. Для C это неактуально, но все равно интересно было на него посмотреть.</p>

<p>Вот результаты забега. Для сравнения: статический файл отдается 5201.02 раза в секунду, а встроенный в нжинс яваскрипт — около 15 000;
<ul>
<li>С: 600,07;</li>
<li>перл: 419,53;</li>
<li>руби: 271,65;</li>
<li>питон: 32,45;</li>
<li>яваскрипт: 403,00.</li>
</ul></p>

<p>Питон, как видно, я готовить не умею. На самом деле он крутой, быстрый, и тут что-то не так. В остальном, все говорит в пользу кеширования. Бинарник на C, конечно, заметно шустрее, но не принципиально. Легко подобрать задачу под один из языков, и справится он лучше других.</p>

<p>Тестил на рабочем компе: Intel Core 2 Duo, 2.16 ГГц, 4 Мб L2, 2 Гб оперативки.
Mac OS X 10.5.5 (9F33), Darwin 9.5.0.</p>

<p>Версии интерпретаторов/компиляторов:
<ul>
<li>JavaScript-C 1.7.0 2007-10-03</li>
<li>ruby 1.8.6 (2007-03-13 patchlevel 0) [i686-darwin8.9.1]</li>
<li>python 2.5.2</li>
<li>perl 5.8.8 (darwin-2level)</li>
<li>gcc version 4.0.1 (Apple Inc. build 5488)</li>
</ul>
</p>
		</section>
	</section>
	
	<dl class="tags">
		<dt class="head">Теги:</dt>
		<dd class="body">
			<ul class="list"><li class="tag">сервер</li><li class="tag">benchmark</li><li class="tag">C</li><li class="tag">cgi</li><li class="tag">javascript</li><li class="tag">perl</li><li class="tag">python</li><li class="tag">ruby</li><li class="tag">spidermonkey</li></ul>
		</dd>
	</dl>
	
	<div class="comments">Очень жду ваших комментариев <a href="mailto:Комментарии блога Конфуция <comments@kung-fu-tzu.ru>?subject=Re: Простейший cgi-скрипт">на почту</a>.</div>
</div>

</div>
<!--# include virtual="/inc/common-bottom.html" -->
</body>
</html>